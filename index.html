<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Confession Board</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Karla:wght@300;400;500;600&family=Newsreader:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="page">
      <header class="hero">
        <div>
          <p class="eyebrow">A quiet place for shared, anonymous truths.</p>
          <h1>Confession Board</h1>
        </div>
        <div class="status-pill" id="connection-status">Offline</div>
      </header>

      <section class="panel">
        <form id="confession-form" class="confession-form">
          <label class="field">
            <span>Your confession</span>
            <textarea
              id="confession-input"
              name="confession"
              rows="5"
              placeholder="Say the thing you have been carrying."
              required
            ></textarea>
          </label>

          <div class="field">
            <span>Visibility</span>
            <div class="toggle-group" role="radiogroup" aria-label="Visibility">
              <label class="toggle">
                <input type="radio" name="visibility" value="public" required />
                <span>Public</span>
              </label>
              <label class="toggle">
                <input type="radio" name="visibility" value="anonymous" required checked />
                <span>Anonymous</span>
              </label>
            </div>
            <p class="helper">
              Public submissions show your name in the global feed. Anonymous
              submissions are saved without a name and do not appear.
            </p>
          </div>

          <label class="field name-field is-hidden" id="name-field">
            <span>Name (shown for Public)</span>
            <input
              id="confession-name"
              name="confessionName"
              type="text"
              maxlength="32"
              placeholder="Name or initials"
            />
          </label>

          <div class="form-actions">
            <button class="primary" type="submit">Release confession</button>
            <button class="ghost small undo-button is-hidden" id="undo-submit" type="button">Undo</button>
            <p class="helper" id="cooldown-timer"></p>
          </div>

          <div class="form-feedback" id="form-feedback" role="status"></div>
        </form>
      </section>

      <section class="panel feed-panel">
        <div class="feed-header">
          <div>
            <h2>Global Feed</h2>
            <p class="helper" id="feed-meta">Latest confessions from everywhere.</p>
          </div>
          <button class="ghost" id="refresh-feed" type="button">Refresh</button>
        </div>

        <div class="feed-list" id="feed-list" aria-live="polite"></div>

        <div class="feed-footer">
          <div class="feed-status" id="feed-status">
            <span id="feed-status-text"></span>
            <button class="ghost small" id="retry-feed" type="button">Retry</button>
          </div>
          <div class="feed-loading" id="feed-loading" aria-live="polite">Loading more...</div>
          <div id="feed-sentinel" class="feed-sentinel" aria-hidden="true"></div>
        </div>
      </section>
    </main>

    <script>window.__ENV__ = window.__ENV__ || {};</script>
    <script src="config.js"></script>
    <script type="module" src="src/main.js"></script>
  </body>
</html>
